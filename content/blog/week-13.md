---
title: "ç¬¬ 13 æœŸ: Next.js 12 å‘å¸ƒï¼Œä½¿ç”¨ Rust å†™çš„ç¼–è¯‘å™¨æ›¿æ¢ Babel"
date: 2021-10-30T00:00:00.000Z
---

å‰ç«¯çˆ±å¥½è€…å‘¨åˆŠ (Github: shfshanyue/weekly)ï¼Œæ¯å‘¨è®°å½•å…³äºå‰ç«¯çš„å¼€æºå·¥å…·ã€ä¼˜ç§€æ–‡ç« ã€é‡å¤§åº“ç‰ˆæœ¬å‘å¸ƒè®°å½•ç­‰ç­‰ï¼Œå‘¨åˆŠä¸­ä¼˜ç§€æ–‡ç« ä¼šåœ¨å…¬ä¼—å·**å…¨æ ˆæˆé•¿ä¹‹è·¯**é€ä¸€æ¨é€ã€‚æ¯å‘¨ä¸€å‘å¸ƒï¼Œè®¢é˜…å¹³å°å¦‚ä¸‹ï¼Œæ¬¢è¿è®¢é˜…ã€‚

+ è®¢é˜…ç½‘ç«™: <https://weekly.shanyue.tech>
+ è®¢é˜…Github: [shfshanyue/weekly](https://github.com/shfshanyue/weekly)
+ [ç‚¹å‡»åœ¨å¾®ä¿¡è®¢é˜…](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA3MzU0MjIzMA==&action=getalbum&album_id=1761820812803620868&scene=21#wechat_redirect)



## ä¸€å¥è¯

+ Next.js 12 å‘å¸ƒ
+ å­—èŠ‚è·³åŠ¨ modernjs.dev å‘å¸ƒ

## å¼€å‘åˆ©å™¨


### **ä¸€ã€ [tailwind play: å®æ—¶ç¼–è¾‘æµ‹è¯•å¹¶å­¦ä¹  TailwindCSS çš„ç¼–è¾‘å™¨](https://play.tailwindcss.com/)**

![tailwindcss play](https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/20210619/image.3cx7ho85e9w0.png)

åœ¨ TailWind Play ä¸­ï¼Œä½ å¯ä»¥ç¼–è¾‘ tailwindcss ä»£ç ï¼Œå¹¶å®æ—¶æŸ¥çœ‹æ•ˆæœã€‚åœ¨å…¶ä¸­ï¼Œä½ å¯ä»¥ç¼–è¾‘ tailwindcss é…ç½®ï¼ŒåŒæ—¶ï¼Œä½ è¿˜å¯ä»¥æŠŠä»£ç ç”Ÿæˆå”¯ä¸€åœ°å€è¿›è¡Œåˆ†äº«ã€‚

TailWind Play ä½¿å¾—å­¦ä¹  tailwindcss çš„æˆæœ¬å˜å¾—å¾ˆä½ï¼Œå¦‚æœä½ ä¹…é—» tailwindcss å¤§åå´è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡å®ƒï¼Œå¯ä»¥åœ¨ä¸Šè¾¹è¯•ä¸€è¯•





    

### **äºŒã€ [å¾®å›¾: çº¯å‰ç«¯å‹ç¼©ä½ çš„å›¾ç‰‡èµ„æº](https://devtool.tech/tiny-image)**

![tiny-image](https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/src/tiny-image.2zcfl0afv0q0.png)

ä¸é™å›¾ç‰‡å¤§å°ï¼Œä¸é™å›¾ç‰‡æ•°é‡ï¼Œå¹¶å¯è½¬åŒ–æˆ‘ webp/avif çš„å›¾ç‰‡å‹ç¼©å·¥å…·ã€‚





    

### **ä¸‰ã€ [AVPress: çº¯ç½‘é¡µç«¯å‹ç¼©ä½ çš„è§†é¢‘èµ„æº](https://avpress.zaps.dev/)**

![AVPRESS](https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/20210619/avpress.1gq0akmtzwzk.png)

ä½¿ç”¨ WASM åœ¨çº¯å‰ç«¯ï¼Œè€Œéä¾èµ–åç«¯æ¥å£å»å‹ç¼©è§†é¢‘èµ„æºã€‚





    

## æ–‡ç« æ¨è


### **ä¸€ã€ [è°ˆè°ˆæˆ‘è¿™äº›å¹´å¯¹å‰ç«¯æ¡†æ¶çš„ç†è§£](https://mp.weixin.qq.com/s/mZ7KuFjyCWNCAq7HnXg96A)**

æŠ€æœ¯ä»å‡ºç°åˆ°å®Œå–„åˆ°è¿å¸¦çš„å‘¨è¾¹ç”Ÿæ€çš„å®Œå–„æ˜¯ä¸€ä¸ªè½®å›ï¼Œä»æœ€å¼€å§‹æœåŠ¡ç«¯æ¸²æŸ“ï¼Œåˆ°äº†åæ¥çš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œç„¶åå‡ºç°äº†é€»è¾‘å±‚çš„ç»„ä»¶æ–¹æ¡ˆï¼Œæœ€ååˆè¦åŸºäºç»„ä»¶æ–¹æ¡ˆé‡æ–°å®ç°æœåŠ¡ç«¯æ¸²æŸ“ã€‚

å…¶å®ç‰©ç†å±‚çš„ä¸œè¥¿ä¸€ç›´éƒ½æ²¡å˜ï¼Œåªæ˜¯é€»è¾‘å±‚ä¸æ–­çš„ä¸€å±‚æ·»åŠ åˆä¸€å±‚ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†æé«˜ç”Ÿäº§æ•ˆç‡ï¼Œé™ä½å¼€å‘æˆæœ¬ï¼Œä¿è¯è´¨é‡ï¼Œè¿™ä¹Ÿæ˜¯æŠ€æœ¯å‘å±•çš„è¶‹åŠ¿ã€‚"





    

### **äºŒã€ [Javascript æ˜¯å¦‚ä½•åœ¨ v8 ä¸­æ‰§è¡Œçš„](https://juejin.cn/post/6844903990073753613)**

![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/11/8/16e48ec43aed2172~tplv-t2oaga2asx-watermark.awebp)

å­—èŠ‚ç æ˜¯æœºå™¨ç çš„æŠ½è±¡ã€‚å¦‚æœå­—èŠ‚ç çš„è®¾è®¡ä¸ç‰©ç† CPU çš„è®¡ç®—æ¨¡å‹ç›¸åŒï¼Œé‚£ä¹ˆå°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ä»£ç å°±ä¼šæ›´åŠ å®¹æ˜“ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè§£é‡Šå™¨é€šå¸¸æ˜¯å¯„å­˜å™¨æˆ–å †æ ˆæœºå™¨ã€‚Ignition æ˜¯ä¸€ä¸ªå¸¦æœ‰ç´¯åŠ å™¨çš„å¯„å­˜å™¨ã€‚





    

### **ä¸‰ã€ [ç°ä»£åŒ– Web å…³äº HTTP ç¼“å­˜æ–°çš„æ ‡å‡†](https://httptoolkit.tech/blog/status-targeted-caching-headers/)**

![cache-status](https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/src/cache-status.54usyd12g4w0.png)

ç°ä»£åŒ– Web å…³äº HTTP ç¼“å­˜æ–°çš„æ ‡å‡†ï¼Œä¸¤ä¸ªå“åº”å¤´

1. Cache-Status
2. [Target]-Cache-Control

å¯ä»¥æ›´å®¹æ˜“åœ°é…ç½®æºæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯ä¸­é—´å„çº§ä¸­é—´ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ§åˆ¶





    

## ä»£ç ç‰‡æ®µ



## å¼€æºä¸åº“


### **ä¸€ã€ [React Hot Toast: æœ‰å¯èƒ½æ˜¯ React ä¸­æœ€å¥½ç”¨çš„æç¤ºæ¡†ç»„ä»¶](https://react-hot-toast.com/)**

![React ä¸­çš„æç¤ºæ¡†](https://cdn.jsdelivr.net/gh/timolins/react-hot-toast@main/assets/header.svg)

æ˜¯å±±æœˆè®¤ä¸ºæ¯”è¾ƒå¥½ç”¨çš„æç¤ºæ¡†ç»„ä»¶ï¼Œæ‹¥æœ‰ä»¥ä¸‹ç‰¹ç‚¹ã€‚ä½“ç§¯å°ã€æ”¯æŒ hooks

+ ğŸ”¥ Hot by default
+ ğŸ”© Easily Customizable
+ â³ Promise API - Automatic loader from a promise
+ ğŸ•Š Lightweight - less than 5kb including styles
+ âœ… Accessible
+ ğŸ¤¯ Headless Hooks - Create your own with useToaster() 

å¯¹äºå…¶ä¸­æ”¯æŒ Promise çš„ç‰¹æ€§ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ååˆ†å¥½ç”¨

``` js 
const fetchUser = getUser(10086)
toast.promise(fetchUser,
  {
    success: 'è¯¥ç”¨æˆ·ä¿¡æ¯è·å–æˆåŠŸ',
    error: 'è¯¥ç”¨æˆ·ä¿¡æ¯è·å–å¤±è´¥',
    loading: 'æ­£åœ¨è·å–è¯¥ç”¨æˆ·ä¿¡æ¯'
  },
  {
    style: {
      minwidth: '250px',
    },
    success: {
      duration: 5000,
      icon: 'ğŸ”¥',
    },
  }
)
```



+ [npm: react-hot-toast](https://npm.devtool.tech/react-hot-toast)

    

### **äºŒã€ React Tracking: React å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ‰“ç‚¹å¹¶ä¼˜ç§€çš„ API**

`React-Tracking` æ˜¯ React ä¸­ä¸€ä¸ªå…³äºæ‰“ç‚¹çš„åº“ï¼Œç›®å‰åœ¨ Github æ‹¥æœ‰1K+é¢—æ˜Ÿæ˜Ÿã€‚

ç¬¬ä¸€æ­¥: åœ¨ React æ ¹ç»„ä»¶ä¸­ï¼Œä½¿ `React-Tracking` ä½äºæœ€é¡¶å±‚ï¼Œè¿›è¡Œå…¨å±€ç»Ÿä¸€é…ç½®ï¼Œå¯åœ¨è¿™ä¸€æ­¥ä¸ä¸“ä¸šæ‰“ç‚¹æœåŠ¡è¿›è¡Œå¯¹æ¥ï¼Œå¦‚è°·æ­Œç»Ÿè®¡ã€ç™¾åº¦ç»Ÿè®¡ã€ç¥ç­–ç»Ÿè®¡ç­‰ã€‚å¦‚æœä½ ä»¬çš„æ‰“ç‚¹æœåŠ¡æ˜¯è‡ªç ”çš„ï¼Œä¹Ÿå®Œå…¨å¯ä»¥ä½¿ç”¨å®ƒã€‚

åœ¨ `React-Tracking` ä¸­ï¼Œä½¿ç”¨ `dispatch` å‡½æ•°ä¸ä¸“ä¸šæ‰“ç‚¹æœåŠ¡è¿›è¡Œå¯¹æ¥ã€‚

``` js
const TrackedApp = track(
  // å…¨å±€æ‰“ç‚¹æ•°æ®
  { app: "my-app" },

  // å…¨å±€é…ç½®
  {
    // dataLayper ä¸ºè°·æ­Œç»Ÿè®¡çš„ APIï¼Œå¯åœ¨æ­¤å¤„ä¸ä¸“ä¸šæ‰“ç‚¹æœåŠ¡è¿›è¡Œå¯¹æ¥ã€‚
    dispatch: data => {
      console.log(data);
      (window.dataLayer = window.dataLayer || []).push(data);
    }
  }
)(App);

const rootElement = document.getElementById("root");
ReactDOM.render(<TrackedApp />, rootElement);
```

ç¬¬äºŒéƒ¨ï¼šåœ¨ React å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ `useTracking` è¿›è¡Œæ‰“ç‚¹ç»Ÿè®¡

``` js
import { useTracking } from 'react-tracking';

const FooPage = () => {
  const { Track, trackEvent } = useTracking({ page: 'FooPage' });

  return (
    <Track>
      <div
        onClick={() => {
          trackEvent({ action: 'click' });
        }}
      />
    </Track>
  );
}
```

æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ç‚¹å‡»è¯¥é“¾æ¥è¿›è¡Œå°è¯•ã€‚[React-Tracking Example](https://codesandbox.io/s/reacttracking-example-qk30j4x1zj?file=/src/index.js)





    

### **ä¸‰ã€ [html2canvas: å¦‚ä½•æŠŠ HTML è½¬åŒ–ä¸ºå›¾ç‰‡](https://html2canvas.hertzen.com/)**

![html2canvas](https://cdn.jsdelivr.net/gh/shfshanyue/assets@master/src/image.74taknc07r00.png)

æµ·æŠ¥ã€æˆªå±ã€æ°´å°ï¼Œè¿™äº›å¸¸è§çš„ä¸šåŠ¡éœ€æ±‚éƒ½ç¦»ä¸å¼€ä¸€ä¸ªåº“ï¼Œé‚£å°±æ˜¯ `html2canvas`ã€‚æŠŠ DOM è½¬åŒ–ä¸º Canvasï¼Œä»…ä»…éœ€è¦ä¸€ä¸ª APIã€‚

``` js
const canvas = await html2canvas(document.querySelector("#capture"))
```

[é‚£ä½ çŸ¥é“ DOM è½¬ä¸ºå›¾ç‰‡çš„åŸç†æ˜¯ä»€ä¹ˆå—ï¼Ÿ](https://github.com/shfshanyue/Daily-Question/issues/437)

å¤§æ¦‚æ˜¯åŸºäºä»¥ä¸‹é“¾æ¡

1. DOM -> foreignObject -> SVG -> Canvas -> JPEG/PNG

å¦‚æœè¦å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥å‰ä»‹ç»è¿‡çš„å¦å¤–ä¸€ä¸ªåº“ã€‚

+ [dom-to-image](https://github.com/tsayen/dom-to-image): Generates an image from a DOM node using HTML5 canvas





    

## ç‰ˆæœ¬å‘å¸ƒ


### **ä¸€ã€ [Next.js 12 å‘å¸ƒ](https://nextjs.org/blog/next-12)**

+ Rust Compiler: ~3x faster Fast Refresh and ~5x faster builds
+ Middleware (beta): Enabling full flexibility in Next.js with code over configuration
+ React 18 Support: Native Next.js APIs are now supported, as well as Suspense
+ <Image /> AVIF Support: Opt-in for 20% smaller images
+ Bot-aware ISR Fallback: Optimized SEO for web crawlers
+ Native ES Modules Support: Aligning with the standardized module system
+ URL Imports (alpha): Import packages from any URL, no installs required
+ React Server Components (alpha): Try it today, including SSR streaming





    
